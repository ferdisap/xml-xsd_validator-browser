var b=function(a,t,o,e,n,m){function r(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var l=e.kind,u=l==="getter"?"get":l==="setter"?"set":"value",c=!t&&a?e.static?a:a.prototype:null,i=t||(c?Object.getOwnPropertyDescriptor(c,e.name):{}),s,h=!1,_=o.length-1;_>=0;_--){var g={};for(var d in e)g[d]=d==="access"?{}:e[d];for(var d in e.access)g.access[d]=e.access[d];g.addInitializer=function(p){if(h)throw new TypeError("Cannot add initializers after decoration has completed");m.push(r(p||null))};var f=(0,o[_])(l==="accessor"?{get:i.get,set:i.set}:i[u],g);if(l==="accessor"){if(f===void 0)continue;if(f===null||typeof f!="object")throw new TypeError("Object expected");(s=r(f.get))&&(i.get=s),(s=r(f.set))&&(i.set=s),(s=r(f.init))&&n.unshift(s)}else(s=r(f))&&(l==="field"?n.unshift(s):i[u]=s)}c&&Object.defineProperty(c,e.name,i),h=!0},D=function(a,t,o){for(var e=arguments.length>2,n=0;n<t.length;n++)o=e?t[n].call(a,o):t[n].call(a);return e?o:void 0},w=function(a,t,o){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:o?"".concat(o," ",t):t})};import{disposeBy as P,XmlDisposable as j}from"./disposable.mjs";import{XmlParseError as C,XmlDocument as S}from"./document.mjs";import{XmlTreeCommonStruct as y,error as v,xmlCtxtParseDtd as E,xmlCtxtSetErrorHandler as O,xmlFreeParserCtxt as X,xmlFreeDtd as x,xmlNewParserCtxt as T}from"./libxml2.mjs";function F(a){y.parent(a)===0&&x(a)}let k=(()=>{let a=[P(F)],t,o=[],e,n=j;var m=e=class extends n{get doc(){const r=y.doc(this._ptr);return r?S.getInstance(r):null}static fromBuffer(r){const l=T(),u=v.storage.allocate([]);O(l,v.errorCollector,u);const c=E(l,r,null,null),i=v.storage.get(u);if(v.storage.free(u),X(l),!c)throw new C(i.map(s=>s.message).join(""),i);return m.getInstance(c)}static fromString(r){return this.fromBuffer(new TextEncoder().encode(r))}};return w(e,"XmlDtd"),(()=>{const r=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;b(null,t={value:e},a,{kind:"class",name:e.name,metadata:r},null,o),m=e=t.value,r&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r}),D(e,o)})(),m=e})();export{k as XmlDtd};
